{% extends "section.html"%}

{% block breadcrumbs %}

    <div class="breadcrumbs">
        <a href="/{{ home }}">Home</a>
        &rsaquo; Synchronize with Community Server
    </div>
    
{% endblock %}


{% block content %}
<P>You are {{ hostname }}.</P>
<P>Your locally generated transactions can be found <A href="/admin/sync/outgoingtransaction/">here</A></P>
<A href="/admin/sync/producer/">Producers</A>
{% block usb_sync %}{% endblock usb_sync %}

<table>
<thead>
<th></th>
<th>Producer</th>
<th>Unlock</th>
<th>Sync URL</th>
<th>Transactions</th>
<th>URL</th>
{% if show_checkin_link %}<th>Return URL</th>{% endif %}
<th>Last Sync</th>
<th>Status</th>
</thead>
<tbody>
{% for producer in producers %}
    {% if producer.name == selected_producer %}
        <tr style="background: LightYellow;">
    {% else%}
        <tr class="{% cycle 'row1' 'row2' %}">
    {% endif %}
    <td>{{ forloop.counter }}.&nbsp;</td>
    <td>{{ producer.name }}</td>
    {% block return_app %}
    	<td><A href="/dispatch/return/{{ producer.name }}/">unlock {{ producer.name }}</A></td>
    {% endblock return_app %}
    {% block consuming_app %}
    	<td><A href="/bhp_sync/consume/{{ producer.name }}/">synchronize with server</A></td>
    {% endblock consuming_app %}
    <td><A href="{{ producer.url }}admin/sync/outgoingtransaction/?is_consumed__exact=0&producer={{ producer.name }}">producer outgoing transactions</A></td>    
    {% if show_checkin_link %}
        <td><A href="/{{ CHECKOUT_APP }}/return/{{ producer.name }}/">Return in netbook</A></td>
    {% endif %}
    <td>{{ producer.url }}</td>
    <td>{{ producer.sync_datetime|timesince }} ago</td>
    <td><div style="{% if producer.sync_status == 'OK' %}color:green;{% endif%}{% if producer.sync_status == 'Error' %}color:red;{% endif%}">{{ producer.sync_status }}</div></td>        
    </tr> 

{% endfor %}
</tbody>
</table>
{% block play_transactions %}{% endblock play_transactions %}
{% endblock content %}

